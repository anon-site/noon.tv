<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://cdn.jsdelivr.net https://www.youtube.com; style-src 'self' 'unsafe-inline' https://cdnjs.cloudflare.com https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com https://cdnjs.cloudflare.com; img-src 'self' data: https:; media-src 'self' https: blob:; connect-src 'self' https: wss:; frame-src 'self' https://www.youtube.com https://youtube.com; child-src 'self' https://www.youtube.com https://youtube.com; object-src 'none'; base-uri 'self'; form-action 'self';">
    
    <!-- PWA Meta Tags -->
    <meta name="application-name" content="ANON TV">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="ANON TV">
    <meta name="description" content="ููุตุฉ ุดุงููุฉ ููุดุงูุฏุฉ ุงููููุงุช ุงููุถุงุฆูุฉ ุงูุนุฑุจูุฉ ุงููุจุงุดุฑุฉ ุจุฃูุถู ุฌูุฏุฉ ูุฃุญุฏุซ ุงูุชูููุงุช">
    <meta name="format-detection" content="telephone=no">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="msapplication-config" content="./browserconfig.xml">
    <meta name="msapplication-TileColor" content="#667eea">
    <meta name="msapplication-tap-highlight" content="no">
    <meta name="theme-color" content="#667eea">
    
    <!-- Open Graph Meta Tags -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="ANON TV - ุงููููุงุช ุงููุถุงุฆูุฉ ุงูุนุฑุจูุฉ">
    <meta property="og:description" content="ููุตุฉ ุดุงููุฉ ููุดุงูุฏุฉ ุงููููุงุช ุงููุถุงุฆูุฉ ุงูุนุฑุจูุฉ ุงููุจุงุดุฑุฉ ุจุฃูุถู ุฌูุฏุฉ ูุฃุญุฏุซ ุงูุชูููุงุช">
    <meta property="og:image" content="./icons/icon-512x512.png">
    <meta property="og:url" content="/TV-AR/">
    <meta property="og:site_name" content="ANON TV">
    <meta property="og:locale" content="ar_SA">
    
    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="ANON TV - ุงููููุงุช ุงููุถุงุฆูุฉ ุงูุนุฑุจูุฉ">
    <meta name="twitter:description" content="ููุตุฉ ุดุงููุฉ ููุดุงูุฏุฉ ุงููููุงุช ุงููุถุงุฆูุฉ ุงูุนุฑุจูุฉ ุงููุจุงุดุฑุฉ ุจุฃูุถู ุฌูุฏุฉ ูุฃุญุฏุซ ุงูุชูููุงุช">
    <meta name="twitter:image" content="./icons/icon-512x512.png">
    
    <title>ANON TV - ุงููููุงุช ุงููุถุงุฆูุฉ ุงูุนุฑุจูุฉ</title>
    
    <!-- Favicon and App Icons -->
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
    
    <!-- Apple Touch Icons -->
    <link rel="apple-touch-icon" sizes="57x57" href="./icons/apple-touch-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="./icons/apple-touch-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="./icons/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="./icons/apple-touch-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="./icons/apple-touch-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="./icons/apple-touch-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="./icons/apple-touch-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="./icons/apple-touch-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="./icons/apple-touch-icon-180x180.png">
    
    <!-- Android Icons -->
    <link rel="icon" type="image/png" sizes="192x192" href="./icons/android-chrome-192x192.png">
    <link rel="icon" type="image/png" sizes="512x512" href="./icons/android-chrome-512x512.png">
    
    <!-- Manifest -->
    <link rel="manifest" href="./site.webmanifest">
    
    <!-- Mask Icon for Safari -->
    <link rel="mask-icon" href="./icons/safari-pinned-tab.svg" color="#667eea">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <i class="fas fa-satellite-dish"></i>
                    <h1>ANON TV</h1>
                    <div class="admin-badge" id="adminBadge" style="display: none;">
                        <i class="fas fa-crown"></i>
                        <span>Admin</span>
                    </div>
                </div>
                <div class="header-center desktop-only">
                    <!-- Search Container in Header -->
                    <div class="header-search-container">
                        <input type="text" class="header-search-input" placeholder="ุงูุจุญุซ ุนู ููุงุฉ..." id="searchInput">
                        <i class="fas fa-search header-search-icon"></i>
                    </div>
                    
                </div>

                <div class="header-actions">
                    <!-- Theme Toggle Switch -->
                    <label class="theme-switch">
                        <span class="sun"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><g fill="#ffd43b"><circle r="5" cy="12" cx="12"></circle><path d="m21 13h-1a1 1 0 0 1 0-2h1a1 1 0 0 1 0 2zm-17 0h-1a1 1 0 0 1 0-2h1a1 1 0 0 1 0 2zm13.66-5.66a1 1 0 0 1 -.66-.29 1 1 0 0 1 0-1.41l.71-.71a1 1 0 1 1 1.41 1.41l-.71.71a1 1 0 0 1 -.75.29zm-12.02 12.02a1 1 0 0 1 -.71-.29 1 1 0 0 1 0-1.41l.71-.66a1 1 0 0 1 1.41 1.41l-.71.71a1 1 0 0 1 -.7.24zm6.36-14.36a1 1 0 0 1 -1-1v-1a1 1 0 0 1 2 0v1a1 1 0 0 1 -1 1zm0 17a1 1 0 0 1 -1-1v-1a1 1 0 0 1 2 0v1a1 1 0 0 1 -1 1zm-5.66-14.66a1 1 0 0 1 -.7-.29l-.71-.71a1 1 0 0 1 1.41-1.41l.71.71a1 1 0 0 1 0 1.41 1 1 0 0 1 -.71.29zm12.02 12.02a1 1 0 0 1 -.7-.29l-.66-.71a1 1 0 0 1 1.36-1.36l.71.71a1 1 0 0 1 0 1.41 1 1 0 0 1 -.71.24z"></path></g></svg></span>
                        <span class="moon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path d="m223.5 32c-123.5 0-223.5 100.3-223.5 224s100 224 223.5 224c60.6 0 115.5-24.2 155.8-63.4 5-4.9 6.3-12.5 3.1-18.7s-10.1-9.7-17-8.5c-9.8 1.7-19.8 2.6-30.1 2.6-96.9 0-175.5-78.8-175.5-176 0-65.8 36-123.1 89.3-153.3 6.1-3.5 9.2-10.5 7.7-17.3s-7.3-11.9-14.3-12.5c-6.3-.5-12.6-.8-19-.8z"></path></svg></span>   
                        <input type="checkbox" class="theme-input" id="themeToggle">
                        <span class="theme-slider"></span>
                    </label>
                    
                    <button class="sidebar-toggle-btn desktop-only" onclick="app.toggleSidebar()">
                        <i class="fas fa-bars"></i>
                    </button>
                </div>
            </div>
        </div>
    </header>


    


    <!-- Breadcrumbs -->
    <div class="breadcrumbs-container">
        <div class="container">
            <nav class="breadcrumbs" id="breadcrumbs">
                <a href="#" class="breadcrumb-item active" data-category="all">
                    <i class="fas fa-home"></i>
                    ุงูุฑุฆูุณูุฉ
                </a>
                <span class="breadcrumb-separator">/</span>
                <span class="breadcrumb-current" id="currentBreadcrumb">ุฌููุน ุงููููุงุช</span>
                <div class="channel-stats" id="channelStats">
                    <span class="stats-text">ุนุฏุฏ ุงููููุงุช: <strong id="channelCount">0</strong></span>
                    <span class="last-update-text">Last Update: <strong id="lastUpdateTime">-</strong></span>
                </div>
            </nav>
        </div>
    </div>


    <!-- Desktop Sidebar -->
    <div class="desktop-sidebar" id="desktopSidebar">
        <div class="sidebar-header">
            <div class="sidebar-logo">
                <i class="fas fa-satellite-dish"></i>
                <span class="sidebar-title">ANON TV</span>
            </div>
            <button class="sidebar-toggle-btn" onclick="app.toggleSidebar()">
                <i class="fas fa-chevron-right"></i>
            </button>
        </div>
        
        <div class="sidebar-content">
            <!-- TV Categories Section -->
            <div class="sidebar-section">
                <div class="sidebar-section-title">
                    <i class="fas fa-tv"></i>
                    <span>ุชููุฒููู</span>
                </div>
                <div class="sidebar-nav-tabs">
                    <button class="sidebar-nav-tab active" data-category="all">
                        <i class="fas fa-th-large"></i>
                        <span>ุฌููุน ุงููููุงุช</span>
                        <span class="tab-count" id="allCount">0</span>
                    </button>
                    <button class="sidebar-nav-tab" data-category="news">
                        <i class="fas fa-newspaper"></i>
                        <span>ุงูุฃุฎุจุงุฑ</span>
                        <span class="tab-count" id="newsCount">0</span>
                    </button>
                    <button class="sidebar-nav-tab" data-category="entertainment">
                        <i class="fas fa-film"></i>
                        <span>ุงููููุนุฉ</span>
                        <span class="tab-count" id="entertainmentCount">0</span>
                    </button>
                    <button class="sidebar-nav-tab" data-category="sports">
                        <i class="fas fa-futbol"></i>
                        <span>ุงูุฑูุงุถุฉ</span>
                        <span class="tab-count" id="sportsCount">0</span>
                    </button>
                    <button class="sidebar-nav-tab" data-category="religious">
                        <i class="fas fa-mosque"></i>
                        <span>ุงูุฏูููุฉ</span>
                        <span class="tab-count" id="religiousCount">0</span>
                    </button>
                    <button class="sidebar-nav-tab" data-category="music">
                        <i class="fas fa-music"></i>
                        <span>ุงูููุณููู</span>
                        <span class="tab-count" id="musicCount">0</span>
                    </button>
                    <button class="sidebar-nav-tab" data-category="movies">
                        <i class="fas fa-film"></i>
                        <span>ุงูุฃููุงู</span>
                        <span class="tab-count" id="moviesCount">0</span>
                    </button>
                    <button class="sidebar-nav-tab" data-category="documentary">
                        <i class="fas fa-book-open"></i>
                        <span>ุงููุซุงุฆููุฉ</span>
                        <span class="tab-count" id="documentaryCount">0</span>
                    </button>
                </div>
            </div>
            
            <!-- Favorites Section -->
            <div class="sidebar-section">
                <div class="sidebar-section-title">
                    <i class="fas fa-heart"></i>
                    <span>ุงูููุถูุฉ</span>
                </div>
                <div class="sidebar-actions">
                    <button class="sidebar-action-btn favorites-sidebar-btn" onclick="app.toggleFavorites()">
                        <i class="fas fa-heart"></i>
                        <span>ุนุฑุถ ุงูููุถูุฉ</span>
                        <span class="favorites-count" id="sidebarFavoritesCount">0</span>
                    </button>
                </div>
            </div>
            
            <!-- Actions Section -->
            <div class="sidebar-section">
                <div class="sidebar-section-title">
                    <i class="fas fa-tools"></i>
                    <span>ุงูุฃุฏูุงุช</span>
                </div>
                <div class="sidebar-actions">
                    <button class="sidebar-action-btn" onclick="openIPTVChecker()">
                        <i class="fas fa-search"></i>
                        <span>ูุญุต ุงูุฑูุงุจุท</span>
                    </button>
                    <button class="sidebar-action-btn" onclick="openSettings()">
                        <i class="fas fa-cog"></i>
                        <span>ุงูุฅุนุฏุงุฏุงุช</span>
                    </button>
                    <button class="sidebar-action-btn" onclick="openAdminPanel()">
                        <i class="fas fa-user-shield"></i>
                        <span>ููุญุฉ ุงูุชุญูู</span>
                    </button>
                    <button class="sidebar-action-btn" onclick="updateChannels()">
                        <i class="fas fa-sync-alt"></i>
                        <span>ุชุญุฏูุซ ุงููููุงุช</span>
                    </button>
                </div>
            </div>
            
        </div>
    </div>

    <!-- Mobile Bottom Navigation -->
    <div class="mobile-bottom-nav" id="mobileBottomNav">
        <button class="bottom-nav-btn" data-action="categories" onclick="toggleCategoriesDropdown()">
            <i class="fas fa-th-large"></i>
            <span>ุงููุงุฆูุฉ</span>
        </button>
        
        <button class="bottom-nav-btn" data-action="favorites" onclick="app.toggleFavorites()">
            <i class="fas fa-heart"></i>
            <span>ุงูููุถูุฉ</span>
            <span class="favorites-badge" id="mobileFavoritesBadge">0</span>
        </button>
        
        <button class="bottom-nav-btn active" data-action="home" onclick="app.showAllChannels()">
            <i class="fas fa-home"></i>
            <span>ุงูุฑุฆูุณูุฉ</span>
        </button>
        
        <button class="bottom-nav-btn" data-action="search" onclick="toggleSearchPopup()">
            <i class="fas fa-search"></i>
            <span>ุงูุจุญุซ</span>
        </button>
        
        <button class="bottom-nav-btn" data-action="more" onclick="toggleMoreMenu()">
            <i class="fas fa-ellipsis-h"></i>
            <span>ุงููุฒูุฏ</span>
        </button>
    </div>

    <!-- Categories Dropdown -->
    <div class="categories-dropdown" id="categoriesDropdown">
        <div class="dropdown-header">
            <h3>ูุฆุงุช ุงููููุงุช</h3>
            <button class="close-dropdown" onclick="closeCategoriesDropdown()">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="dropdown-content">
            <button class="category-item active" data-category="all" onclick="selectCategory('all')">
                <i class="fas fa-th-large"></i>
                <span>ุฌููุน ุงููููุงุช</span>
                <span class="category-count" id="mobileAllCount">0</span>
            </button>
            <button class="category-item" data-category="news" onclick="selectCategory('news')">
                <i class="fas fa-newspaper"></i>
                <span>ุงูุฃุฎุจุงุฑ</span>
                <span class="category-count" id="mobileNewsCount">0</span>
            </button>
            <button class="category-item" data-category="entertainment" onclick="selectCategory('entertainment')">
                <i class="fas fa-film"></i>
                <span>ุงููููุนุฉ</span>
                <span class="category-count" id="mobileEntertainmentCount">0</span>
            </button>
            <button class="category-item" data-category="sports" onclick="selectCategory('sports')">
                <i class="fas fa-futbol"></i>
                <span>ุงูุฑูุงุถุฉ</span>
                <span class="category-count" id="mobileSportsCount">0</span>
            </button>
            <button class="category-item" data-category="religious" onclick="selectCategory('religious')">
                <i class="fas fa-mosque"></i>
                <span>ุงูุฏูููุฉ</span>
                <span class="category-count" id="mobileReligiousCount">0</span>
            </button>
            <button class="category-item" data-category="music" onclick="selectCategory('music')">
                <i class="fas fa-music"></i>
                <span>ุงูููุณููู</span>
                <span class="category-count" id="mobileMusicCount">0</span>
            </button>
            <button class="category-item" data-category="movies" onclick="selectCategory('movies')">
                <i class="fas fa-film"></i>
                <span>ุงูุฃููุงู</span>
                <span class="category-count" id="mobileMoviesCount">0</span>
            </button>
            <button class="category-item" data-category="documentary" onclick="selectCategory('documentary')">
                <i class="fas fa-book-open"></i>
                <span>ุงููุซุงุฆููุฉ</span>
                <span class="category-count" id="mobileDocumentaryCount">0</span>
            </button>
        </div>
    </div>

    <!-- Search Popup -->
    <div class="search-popup" id="searchPopup">
        <div class="search-popup-content">
            <div class="search-popup-header">
                <h3>ุงูุจุญุซ ุนู ููุงุฉ</h3>
                <button class="close-search" onclick="closeSearchPopup()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="search-popup-body">
                <div class="search-input-container">
                    <input type="text" class="search-popup-input" placeholder="ุงูุชุจ ุงุณู ุงูููุงุฉ..." id="searchPopupInput">
                    <i class="fas fa-search search-icon"></i>
                </div>
                <div class="search-results" id="searchResults">
                    <!-- Search results will appear here -->
                </div>
            </div>
        </div>
    </div>

    <!-- More Menu -->
    <div class="more-menu" id="moreMenu">
        <div class="more-menu-content">
            <button class="more-menu-item" onclick="updateChannels(); closeMoreMenu();">
                <i class="fas fa-sync-alt"></i>
                <span>ุชุญุฏูุซ</span>
            </button>
            <button class="more-menu-item" onclick="openSettings(); closeMoreMenu();">
                <i class="fas fa-cog"></i>
                <span>ุงูุฅุนุฏุงุฏุงุช</span>
            </button>
            <button class="more-menu-item" onclick="openAdminPanel(); closeMoreMenu();">
                <i class="fas fa-user-shield"></i>
                <span>ุงูุชุญูู</span>
            </button>
        </div>
    </div>

    <!-- Mobile Overlay -->
    <div class="mobile-overlay" id="mobileOverlay"></div>

    <!-- Main Content -->
    <main class="main-content">
        <div class="container">
            <div class="channels-grid" id="channelsGrid">
                <!-- Channels will be dynamically loaded here -->
            </div>
        </div>
    </main>

    <!-- Loading Spinner -->
    <div class="loading" id="loading">
        <div class="spinner"></div>
        <p>ุฌุงุฑู ุชุญููู ุงููููุงุช...</p>
    </div>

    <!-- Video Modal -->
    <div class="modal" id="videoModal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="channel-title-container">
                    <h3 id="channelTitle">ููุงุฉ</h3>
                    <span class="channel-country" id="channelCountry">
                        <i class="fas fa-flag"></i>
                        <span class="country-text">-</span>
                    </span>
                </div>
                <div class="modal-controls">
                    <!-- Quality Display -->
                    <div class="quality-display" id="qualityDisplay">
                        <i class="fas fa-video"></i>
                        <span id="currentQualityText">ุชููุงุฆู</span>
                    </div>
                    <div class="quality-control-container">
                        <button class="quality-btn" onclick="toggleQualityMenu()">
                            <i class="fas fa-video"></i>
                            <span id="qualityText">ุฌูุฏุฉ ุงูุจุซ</span>
                            <i class="fas fa-chevron-down"></i>
                        </button>
                        <div class="quality-menu" id="qualityMenu">
                            <div class="quality-option active" data-quality="auto">
                                <i class="fas fa-magic"></i>
                                <span>ุชููุงุฆู</span>
                                <i class="fas fa-check quality-check"></i>
                            </div>
                            <div class="quality-option" data-quality="1080">
                                <i class="fas fa-video"></i>
                                <span>1080p - ุนุงูู ุฌุฏุงู</span>
                                <i class="fas fa-check quality-check"></i>
                            </div>
                            <div class="quality-option" data-quality="720">
                                <i class="fas fa-video"></i>
                                <span>720p - ุนุงูู</span>
                                <i class="fas fa-check quality-check"></i>
                            </div>
                            <div class="quality-option" data-quality="480">
                                <i class="fas fa-video"></i>
                                <span>480p - ูุชูุณุท</span>
                                <i class="fas fa-check quality-check"></i>
                            </div>
                            <div class="quality-option" data-quality="360">
                                <i class="fas fa-video"></i>
                                <span>360p - ุชูููุฑ ุงูุจูุงูุงุช</span>
                                <i class="fas fa-check quality-check"></i>
                            </div>
                            <div class="quality-option" data-quality="240">
                                <i class="fas fa-video"></i>
                                <span>240p - ููุฎูุถ ุฌุฏุงู</span>
                                <i class="fas fa-check quality-check"></i>
                            </div>
                        </div>
                    </div>
                    <button class="pip-btn" onclick="togglePictureInPicture()" title="ุฅุฎุฑุงุฌ ุงูุดุงุดุฉ ุฎุงุฑุฌ ุงููุชุตูุญ">
                        <i class="fas fa-external-link-alt"></i>
                    </button>
                    <button class="fullscreen-btn" onclick="toggleFullscreen()">
                        <i class="fas fa-expand"></i>
                    </button>
                    <button class="close-btn" onclick="closeModal()">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            </div>
            <div class="video-container">
                <video id="videoPlayer" controls autoplay>
                    <source id="videoSource" src="" type="application/x-mpegURL">
                    ูุชุตูุญู ูุง ูุฏุนู ุชุดุบูู ุงูููุฏูู
                </video>
                <div class="video-loading" id="videoLoading">
                    <div class="spinner"></div>
                    <p>ุฌุงุฑู ุชุญููู ุงูุจุซ...</p>
                </div>
                <!-- News Ticker -->
                <div class="news-ticker" id="newsTicker">
                    <div class="news-ticker-label">
                        <i class="fas fa-newspaper"></i>
                        ุขุฎุฑ ุงูุฃุฎุจุงุฑ
                    </div>
                    <div class="news-ticker-content">
                        <div class="news-ticker-text" id="newsTickerText">
                            ุนุงุฌู: ุงูููุฉ ุงูุนุฑุจูุฉ ุชูุงูุด ุฃูู ุงููุถุงูุง ุงูุฅูููููุฉ ูุงูุฏูููุฉ โข โข โข ูุคุชูุฑ ุฏููู ุญูู ุงูุชุบูุฑุงุช ุงูููุงุฎูุฉ ูุจุฏุฃ ุฃุนูุงูู ูู ุฏุจู โข โข โข ุงุฑุชูุงุน ุฃุณุนุงุฑ ุงูููุท ูู ุงูุฃุณูุงู ุงูุนุงูููุฉ โข โข โข ููุชุฎุจ ูุตุฑ ูุญูู ููุฒุงู ูููุงู ูู ุชุตููุงุช ูุฃุณ ุงูุนุงูู โข โข โข ุงูุชุชุงุญ ูุนุฑุถ ุงููุชุงุจ ุงูุฏููู ูู ุงูุฑูุงุถ โข โข โข ุฅูุฌุงุฒุงุช ุฌุฏูุฏุฉ ูู ูุฌุงู ุงูุทุงูุฉ ุงููุชุฌุฏุฏุฉ ุจุฏูู ุงูุฎููุฌ
                        </div>
                    </div>
                </div>
                <!-- Channel Logo Overlay -->
                <div class="channel-logo-overlay" id="channelLogoOverlay">
                    <img id="overlayLogo" src="" alt="ุดุนุงุฑ ุงูููุงุฉ">
                </div>
                <!-- Live Indicator -->
                <div class="live-indicator">
                    <span class="live-dot"></span>
                    ูุจุงุดุฑ
                </div>
                
                <!-- Ad Block Notification -->
                <div class="ad-block-notification" id="adBlockNotification">
                    <i class="fas fa-shield-alt"></i>
                    ุชู ุชูุนูู ููุน ุงูุฅุนูุงูุงุช
                </div>
            </div>
        </div>
        <div class="modal-overlay"></div>
    </div>

    <!-- Settings Modal -->
    <div class="modal" id="settingsModal">
        <div class="modal-content settings-content">
            <div class="modal-header">
                <h3>ุงูุฅุนุฏุงุฏุงุช</h3>
                <button class="close-btn" onclick="closeSettings()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="settings-body">
                <div class="setting-item">
                    <label for="autoQuality">ุฌูุฏุฉ ุชููุงุฆูุฉ ุญุณุจ ุณุฑุนุฉ ุงูุฅูุชุฑูุช</label>
                    <label class="switch">
                        <input type="checkbox" id="autoQuality" checked>
                        <span class="slider"></span>
                    </label>
                </div>
                <div class="setting-item">
                    <label for="autoplay">ุชุดุบูู ุชููุงุฆู</label>
                    <label class="switch">
                        <input type="checkbox" id="autoplay" checked>
                        <span class="slider"></span>
                    </label>
                </div>

                <div class="setting-item">
                    <label for="volume">ูุณุชูู ุงูุตูุช</label>
                    <input type="range" id="volume" min="0" max="100" value="100" class="volume-slider">
                </div>
                <div class="setting-item">
                    <label for="theme">ููุท ุงูุชุทุจูู</label>
                    <select id="theme" class="theme-select">
                        <option value="dark">ุฏุงูู</option>
                        <option value="light">ูุงุชุญ</option>
                        <option value="auto">ุชููุงุฆู</option>
                    </select>
                </div>
                
                <!-- Appearance Customization Section -->
                <div class="settings-section">
                    <h4 class="settings-section-title">๐จ ุชุฎุตูุต ุงููุธูุฑ</h4>
                    
                    <div class="setting-item">
                        <label for="zoomLevel">ุญุฌู ุงููุญุชูู</label>
                        <div class="zoom-control">
                            <input type="range" id="zoomLevel" min="75" max="150" value="100" step="5" class="zoom-slider">
                            <span id="zoomValue" class="zoom-value">100%</span>
                        </div>
                    </div>
                    
                    <div class="setting-item">
                        <label for="colorTheme">ูุธุงู ุงูุฃููุงู</label>
                        <select id="colorTheme" class="color-theme-select">
                            <option value="default">ุงูุงูุชุฑุงุถู</option>
                            <option value="blue">ุฃุฒุฑู</option>
                            <option value="green">ุฃุฎุถุฑ</option>
                            <option value="purple">ุจููุณุฌู</option>
                            <option value="orange">ุจุฑุชูุงูู</option>
                            <option value="red">ุฃุญูุฑ</option>
                        </select>
                    </div>
                    
                    <div class="setting-item">
                        <label for="fontSize">ุญุฌู ุงููุต</label>
                        <select id="fontSize" class="font-size-select">
                            <option value="small" selected>ุตุบูุฑ</option>
                            <option value="medium">ูุชูุณุท</option>
                            <option value="large">ูุจูุฑ</option>
                            <option value="xlarge">ูุจูุฑ ุฌุฏุงู</option>
                        </select>
                    </div>
                    
                    <div class="setting-item">
                        <label for="borderRadius">ุดูู ุงูุญูุงู</label>
                        <select id="borderRadius" class="border-radius-select">
                            <option value="minimal">ูุฑุจุน</option>
                            <option value="normal">ุนุงุฏู</option>
                            <option value="rounded" selected>ูุฏูุฑ</option>
                        </select>
                    </div>
                </div>
                
                <!-- Layout and Behavior Section -->
                <div class="settings-section">
                    <h4 class="settings-section-title">๐ ุงูุชุฎุทูุท ูุงูุณููู</h4>
                    
                    <div class="setting-item">
                        <label for="layoutMode">ููุท ุงูุนุฑุถ</label>
                        <select id="layoutMode" class="layout-mode-select">
                            <option value="grid">ุดุจูุฉ</option>
                            <option value="list">ูุงุฆูุฉ</option>
                            <option value="compact" selected>ูุถุบูุท</option>
                        </select>
                    </div>
                    
                    <div class="setting-item">
                        <label for="compactMode">ุงููุถุน ุงููุถุบูุท</label>
                        <label class="switch">
                            <input type="checkbox" id="compactMode" checked>
                            <span class="slider"></span>
                        </label>
                    </div>
                    
                    <div class="setting-item">
                        <label for="animationsEnabled">ุชูุนูู ุงูุฑุณูู ุงููุชุญุฑูุฉ</label>
                        <label class="switch">
                            <input type="checkbox" id="animationsEnabled">
                            <span class="slider"></span>
                        </label>
                    </div>
                    
                    <div class="setting-item">
                        <label for="highContrast">ุงูุชุจุงูู ุงูุนุงูู</label>
                        <label class="switch">
                            <input type="checkbox" id="highContrast">
                            <span class="slider"></span>
                        </label>
                    </div>
                </div>
                
                <!-- Quick Actions -->
                <div class="settings-actions">
                    <button class="reset-settings-btn" onclick="app.resetCustomizations()">
                        <i class="fas fa-undo"></i>
                        ุฅุนุงุฏุฉ ุชุนููู ุงูุชุฎุตูุตุงุช
                    </button>
                    <button class="show-welcome-btn" onclick="app.showWelcomeModal()">
                        <i class="fas fa-info-circle"></i>
                        ุนุฑุถ ุฑุณุงูุฉ ุงูุชุฑุญูุจ
                    </button>
                    <button class="delete-cookies-btn" onclick="app.deleteAllCookies()">
                        <i class="fas fa-trash-alt"></i>
                        ุญุฐู ุงูููููุฒ
                    </button>
                </div>
            </div>
        </div>
      <div class="modal-overlay"></div>
  </div>

  <!-- Login Modal -->
  <div class="modal" id="loginModal">
      <div class="modal-content login-content">
          <div class="login-header">
              <div class="login-icon">
                  <i class="fas fa-shield-alt"></i>
              </div>
              <h3>ุชุณุฌูู ุงูุฏุฎูู</h3>
              <p>ุฃุฏุฎู ูููุฉ ุงููุฑูุฑ ูููุตูู ุฅูู ููุญุฉ ุงูุชุญูู - ูุฒูุฏ ุงูุฎุฏูุฉ</p>
          </div>
          <div class="login-form">
              <div class="input-group">
                  <div class="password-input-wrapper">
                      <input type="password" id="adminPassword" placeholder="ูููุฉ ุงููุฑูุฑ" autocomplete="current-password">
                      <i class="fas fa-eye toggle-password" onclick="app.togglePasswordVisibility()"></i>
                  </div>
              </div>
              <div class="login-actions">
                  <button class="login-btn" onclick="app.loginToAdmin()">
                      <i class="fas fa-sign-in-alt"></i>
                      ุฏุฎูู
                  </button>
                  <button class="cancel-btn" onclick="app.closeLoginModal()">
                      <i class="fas fa-times"></i>
                      ุฅูุบุงุก
                  </button>
              </div>
              <div class="login-error" id="loginError" style="display: none;">
                  <i class="fas fa-exclamation-triangle"></i>
                  <span>ูููุฉ ุงููุฑูุฑ ุบูุฑ ุตุญูุญุฉ</span>
              </div>
          </div>
      </div>
      <div class="modal-overlay" onclick="app.closeLoginModal()"></div>
  </div>

  <!-- Admin Panel Modal -->
    <div class="modal" id="adminModal">
        <div class="modal-content admin-content">
            <div class="modal-header">
                <h3>ููุญุฉ ุงูุชุญูู - ูุฒูุฏ ุงูุฎุฏูุฉ</h3>
                <div class="admin-header-actions">
                    <button class="logout-btn" onclick="app.logoutFromAdmin()" title="ุชุณุฌูู ุงูุฎุฑูุฌ ูู ูุฒูุฏ ุงูุฎุฏูุฉ">
                        <i class="fas fa-sign-out-alt"></i>
                    </button>
                    <button class="close-btn" onclick="closeAdminPanel()">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            </div>
            <div class="admin-layout">
                <div class="admin-sidebar">
                    <div class="admin-tabs">
                        <button class="admin-tab active" data-tab="channels" onclick="app.switchAdminTab('channels')">
                            <i class="fas fa-tv"></i>
                            <span>ุฅุฏุงุฑุฉ ุงููููุงุช</span>
                        </button>
                        <button class="admin-tab" data-tab="add" onclick="app.switchAdminTab('add')">
                            <i class="fas fa-plus"></i>
                            <span>ุฅุถุงูุฉ ููุงุฉ</span>
                        </button>
                        <button class="admin-tab" data-tab="categories" onclick="app.switchAdminTab('categories')">
                            <i class="fas fa-tags"></i>
                            <span>ุฅุฏุงุฑุฉ ุงููุฆุงุช</span>
                        </button>
                        <button class="admin-tab" data-tab="settings" onclick="app.switchAdminTab('settings')">
                            <i class="fas fa-cog"></i>
                            <span>ุฅุนุฏุงุฏุงุช ุนุงูุฉ</span>
                        </button>
                        <button class="admin-tab" data-tab="analytics" onclick="app.switchAdminTab('analytics')">
                            <i class="fas fa-chart-line"></i>
                            <span>ุฅุญุตุงุฆูุงุช ุงูุฒูุงุฑ</span>
                        </button>
                        <button class="admin-tab" data-tab="security" onclick="app.switchAdminTab('security')">
                            <i class="fas fa-shield-alt"></i>
                            <span>ุงูุฃูุงู</span>
                        </button>
                    </div>
                </div>
                <div class="admin-body">
                <!-- Channels Management Tab -->
                <div class="admin-tab-content active" id="channelsTab">
                    <div class="save-order-container" id="saveOrderContainer" style="display: none;">
                        <div class="save-order-actions">
                            <button class="save-order-btn" id="saveOrderBtn" onclick="app.saveChannelsOrder()">
                                <i class="fas fa-save"></i> ุญูุธ ุงูุชุฑุชูุจ
                            </button>
                        </div>
                    </div>
                    <div class="admin-search">
                        <input type="text" placeholder="ุงูุจุญุซ ูู ุงููููุงุช..." id="adminSearchInput">
                    </div>
                    <div class="channels-list" id="adminChannelsList">
                        <!-- Admin channels list will be loaded here -->
                    </div>
                </div>
                
                <!-- Add Channel Tab -->
                <div class="admin-tab-content" id="addTab">
                    <form class="add-channel-form" id="addChannelForm">
                        <div class="form-row">
                            <div class="form-column">
                                <div class="form-group">
                                    <label for="channelName">ุงุณู ุงูููุงุฉ</label>
                                    <input type="text" id="channelName" required>
                                </div>
                                <div class="form-group">
                                    <label for="channelCategory">ุงููุฆุฉ</label>
                                    <select id="channelCategory" required>
                                        <option value="news">ุงูุฃุฎุจุงุฑ</option>
                                        <option value="entertainment">ุงููููุนุฉ</option>
                                        <option value="sports">ุงูุฑูุงุถุฉ</option>
                                        <option value="religious">ุงูุฏูููุฉ</option>
                                        <option value="music">ุงูููุณููู</option>
                                        <option value="movies">ุงูุฃููุงู</option>
                                        <option value="documentary">ุงููุซุงุฆููุฉ</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="channelCountryInput">ุงูุจูุฏ</label>
                                    <input type="text" id="channelCountryInput" required>
                                </div>
                                <div class="form-group">
                                    <label for="channelStatus">ุญุงูุฉ ุงูููุงุฉ</label>
                                    <div class="status-toggle-container">
                                        <label class="status-toggle active" data-status="active">
                                            <i class="fas fa-circle status-icon active"></i>
                                            <span>ุชุนูู</span>
                                        </label>
                                        <label class="status-toggle" data-status="inactive">
                                            <i class="fas fa-circle status-icon inactive"></i>
                                            <span>ูุง ุชุนูู</span>
                                        </label>
                                    </div>
                                    <input type="hidden" id="channelStatus" value="active">
                                </div>
                            </div>
                            
                            <div class="form-column">
                                <div class="form-group">
                                    <label for="channelUrl" id="urlLabel">ุฑุงุจุท ุงูุจุซ</label>
                                    <input type="url" id="channelUrl" required placeholder="ุฃุฏุฎู ุฑุงุจุท ุงูุจุซ (HLS ุฃู ููุชููุจ)" oninput="detectUrlType()">
                                    <small id="urlHelp" class="form-help" style="color: #666; font-size: 0.85rem; margin-top: 0.25rem; display: block;">ุฃุฏุฎู ุฑุงุจุท ุงูุจุซ ุงููุจุงุดุฑ ุฃู ุฑุงุจุท ููุชููุจ</small>
                                    <div id="urlTypeIndicator" style="margin-top: 0.5rem; padding: 0.5rem; border-radius: 4px; display: none;">
                                        <i id="urlTypeIcon" class="fas fa-info-circle"></i>
                                        <span id="urlTypeText">ููุน ุงูุฑุงุจุท: </span>
                                        <span id="urlTypeValue" style="font-weight: bold;"></span>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="channelLogo">ุฑุงุจุท ุงูุดุนุงุฑ</label>
                                    <input type="url" id="channelLogo" placeholder="ุฃุฏุฎู ุฑุงุจุท ุงูุดุนุงุฑ">
                                </div>
                                <div class="form-group logo-upload-group">
                                    <label for="logoUpload">ุฃู ุฑูุน ุดุนุงุฑ ูู ุงูุฌูุงุฒ</label>
                                    <div class="logo-upload-container">
                                        <input type="file" id="logoUpload" accept="image/*" style="display: none;">
                                        <button type="button" class="logo-upload-btn" onclick="document.getElementById('logoUpload').click()">
                                            <i class="fas fa-upload"></i>
                                            <span>ุงุฎุชุฑ ุดุนุงุฑ</span>
                                        </button>
                                        <div class="logo-preview" id="logoPreview" style="display: none;">
                                            <img id="logoPreviewImg" src="" alt="ูุนุงููุฉ ุงูุดุนุงุฑ">
                                            <button type="button" class="remove-logo-btn" onclick="removeLogoPreview()">
                                                <i class="fas fa-times"></i>
                                            </button>
                                        </div>
                                    </div>
                                    <small class="form-help">ุณูุชู ูุถุน ุฑุงุจุท ุงูุตูุฑุฉ ุชููุงุฆูุงู ูู ุญูู ุฑุงุจุท ุงูุดุนุงุฑ ุนูุฏ ุงูุฑูุน</small>
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-actions">
                            <button type="button" class="reset-btn" onclick="resetChannelForm()">
                                <i class="fas fa-undo"></i>
                                ุชุตููุฑ
                            </button>
                            <button type="submit" class="add-btn">ุฅุถุงูุฉ ุงูููุงุฉ</button>
                        </div>
                    </form>
                </div>
                
                <!-- Categories Management Tab -->
                <div class="admin-tab-content" id="categoriesTab">
                    <div class="categories-management">
                        <div class="categories-header">
                            <h4>ุฅุฏุงุฑุฉ ูุฆุงุช ุงููููุงุช</h4>
                            <button class="add-category-btn" onclick="showAddCategoryForm()">
                                <i class="fas fa-plus"></i>
                                ุฅุถุงูุฉ ูุฆุฉ ุฌุฏูุฏุฉ
                            </button>
                        </div>
                        
                        <!-- Add/Edit Category Form -->
                        <div class="category-form-container" id="categoryFormContainer" style="display: none;">
                            <form class="category-form" id="categoryForm">
                                <h5 id="categoryFormTitle">ุฅุถุงูุฉ ูุฆุฉ ุฌุฏูุฏุฉ</h5>
                                <div class="form-group">
                                    <label for="categoryKey">ููุชุงุญ ุงููุฆุฉ (ุจุงูุฅูุฌููุฒูุฉ)</label>
                                    <input type="text" id="categoryKey" required placeholder="news, sports, entertainment">
                                    <small>ููุณุชุฎุฏู ูู ุงููุธุงู - ูุฌุจ ุฃู ูููู ุจุงููุบุฉ ุงูุฅูุฌููุฒูุฉ ุจุฏูู ูุณุงูุงุช</small>
                                </div>
                                <div class="form-group">
                                    <label for="categoryName">ุงุณู ุงููุฆุฉ (ุจุงูุนุฑุจูุฉ)</label>
                                    <input type="text" id="categoryName" required placeholder="ุงูุฃุฎุจุงุฑุ ุงูุฑูุงุถุฉุ ุงููููุนุฉ">
                                </div>
                                <div class="form-group">
                                    <label for="categoryIcon">ุฃููููุฉ ุงููุฆุฉ</label>
                                    <select id="categoryIcon" required>
                                        <option value="fas fa-newspaper">๐ฐ ุงูุฃุฎุจุงุฑ</option>
                                        <option value="fas fa-tv">๐บ ุงููููุนุฉ</option>
                                        <option value="fas fa-futbol">โฝ ุงูุฑูุงุถุฉ</option>
                                        <option value="fas fa-pray">๐ ุงูุฏูููุฉ</option>
                                        <option value="fas fa-music">๐ต ุงูููุณููู</option>
                                        <option value="fas fa-film">๐ฌ ุงูุฃููุงู</option>
                                        <option value="fas fa-book-open">๐ ุงููุซุงุฆููุฉ</option>
                                        <option value="fas fa-child">๐ถ ุงูุฃุทูุงู</option>
                                        <option value="fas fa-graduation-cap">๐ ุงูุชุนููููุฉ</option>
                                        <option value="fas fa-utensils">๐ฝ๏ธ ุงูุทุจุฎ</option>
                                        <option value="fas fa-globe">๐ ุงูุฏูููุฉ</option>
                                    </select>
                                </div>
                                <div class="form-actions">
                                    <button type="submit" class="save-category-btn" id="saveCategoryBtn">
                                        <i class="fas fa-save"></i>
                                        ุญูุธ ุงููุฆุฉ
                                    </button>
                                    <button type="button" class="cancel-category-btn" onclick="hideCategoryForm()">
                                        <i class="fas fa-times"></i>
                                        ุฅูุบุงุก
                                    </button>
                                </div>
                                <input type="hidden" id="editingCategoryIndex" value="-1">
                            </form>
                        </div>
                        
                        <!-- Categories List -->
                        <div class="categories-list" id="categoriesList">
                            <!-- Categories will be rendered here -->
                        </div>
                    </div>
                </div>
                
                <!-- General Settings Tab -->
                <div class="admin-tab-content" id="settingsTab">
                    
                    
                    <!-- Remote Storage Settings -->
                    <div class="settings-section-card">
                        <div class="settings-section-header">
                            <i class="fas fa-cloud"></i>
                            <h3>ุงูุชุฎุฒูู ุงูุณุญุงุจู</h3>
                        </div>
                        <div class="settings-section-content">
                            <div class="enhanced-setting-item">
                                <div class="setting-label-group">
                                    <label for="enableRemoteStorage">ุชูุนูู ุงูุชุฎุฒูู ุงูุณุญุงุจู</label>
                                    <small>ูุฒุงููุฉ ุงูุจูุงูุงุช ูุน GitHub ุฃู GitLab</small>
                                </div>
                                <label class="enhanced-switch">
                                    <input type="checkbox" id="enableRemoteStorage">
                                    <span class="enhanced-slider"></span>
                                </label>
                            </div>
                            
                            <div class="remote-storage-config" id="remoteStorageConfig" style="display: none;">
                                <div class="enhanced-setting-item">
                                    <div class="setting-label-group">
                                        <label for="storageProvider">ูุฒูุฏ ุงูุฎุฏูุฉ</label>
                                        <small>ุงุฎุชุฑ ููุตุฉ ุงูุชุฎุฒูู ุงูุณุญุงุจู</small>
                                    </div>
                                    <select id="storageProvider" class="enhanced-select">
                                        <option value="github">GitHub</option>
                                        <option value="gitlab">GitLab</option>
                                    </select>
                                </div>
                                
                                <div class="enhanced-setting-item">
                                    <div class="setting-label-group">
                                        <label for="repositoryUrl">ุฑุงุจุท ุงููุณุชูุฏุน</label>
                                        <small>ูุซู: username/repository-name</small>
                                    </div>
                                    <input type="text" id="repositoryUrl" placeholder="username/repository-name" class="enhanced-input">
                                </div>
                                
                                <div class="enhanced-setting-item">
                                    <div class="setting-label-group">
                                        <label for="accessToken">ุฑูุฒ ุงููุตูู (Token)</label>
                                        <small>ููููู ุฅูุดุงุก ุฑูุฒ ูุตูู ูู ุฅุนุฏุงุฏุงุช ุญุณุงุจู</small>
                                    </div>
                                    <input type="password" id="accessToken" placeholder="ุฃุฏุฎู ุฑูุฒ ุงููุตูู ุงูุดุฎุตู" class="enhanced-input">
                                </div>
                                
                                <div class="enhanced-setting-item">
                                    <div class="setting-label-group">
                                        <label for="branchName">ุงุณู ุงููุฑุน</label>
                                        <small>ุงุณู ุงููุฑุน ูู ุงููุณุชูุฏุน</small>
                                    </div>
                                    <input type="text" id="branchName" value="main" placeholder="main" class="enhanced-input">
                                </div>
                                
                                <div class="enhanced-setting-item">
                                    <div class="setting-label-group">
                                        <label for="autoSync">ูุฒุงููุฉ ุชููุงุฆูุฉ</label>
                                        <small>ูุฒุงููุฉ ุงูุจูุงูุงุช ุชููุงุฆูุงู ุนูุฏ ุงูุชุบููุฑ</small>
                                    </div>
                                    <label class="enhanced-switch">
                                        <input type="checkbox" id="autoSync" checked>
                                        <span class="enhanced-slider"></span>
                                    </label>
                                </div>
                                
                                <div class="remote-storage-actions">
                                    <button class="test-connection-btn" onclick="app.testConnection()">
                                        <i class="fas fa-link"></i>
                                        ุงุฎุชุจุงุฑ ุงูุงุชุตุงู
                                    </button>
                                    <button class="save-remote-settings-btn" onclick="app.saveRemoteStorageSettingsUI()">
                                        <i class="fas fa-save"></i>
                                        ุญูุธ ุงูุฅุนุฏุงุฏุงุช
                                    </button>
                                    <button class="sync-now-btn" onclick="app.manualSync()">
                                        <i class="fas fa-sync-alt"></i>
                                        ูุฒุงููุฉ ุงูุขู
                                    </button>
                                </div>
                                
                                <div class="sync-status" id="syncStatus">
                                    <p><strong>ุญุงูุฉ ุงููุฒุงููุฉ:</strong> <span id="syncStatusText">ุบูุฑ ูุญุฏุฏ</span></p>
                                    <p><strong>ุขุฎุฑ ูุฒุงููุฉ:</strong> <span id="lastSyncTime">ูู ูุชู</span></p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Diagnostic Tools Section -->
                    <div class="settings-section-card">
                        <div class="settings-section-header">
                            <i class="fas fa-tools"></i>
                            <h3>ุฃุฏูุงุช ุงูุชุดุฎูุต</h3>
                        </div>
                        <div class="settings-section-content">
                            <div class="diagnostic-tools-grid">
                                <button class="enhanced-diagnostic-btn diagnostic-btn" onclick="debugStorage()">
                                    <i class="fas fa-stethoscope"></i>
                                    <span>ุชุดุฎูุต ุงูุชุฎุฒูู</span>
                                    <small>ูุญุต ุญุงูุฉ ุงูุจูุงูุงุช ุงููุญููุธุฉ</small>
                                </button>
                                <button class="enhanced-diagnostic-btn export-btn" onclick="app.exportChannels()">
                                    <i class="fas fa-download"></i>
                                    <span>ุชุตุฏูุฑ ุงููููุงุช</span>
                                    <small>ุญูุธ ูุณุฎุฉ ุงุญุชูุงุทูุฉ</small>
                                </button>
                                <button class="enhanced-diagnostic-btn import-btn" onclick="app.importChannels()">
                                    <i class="fas fa-upload"></i>
                                    <span>ุงุณุชูุฑุงุฏ ุงููููุงุช</span>
                                    <small>ุงุณุชุนุงุฏุฉ ูู ุงููุณุฎุฉ ุงูุงุญุชูุงุทูุฉ</small>
                                </button>
                            </div>
                        </div>
                    </div>
                    <input type="file" id="importFileInput" accept=".json" style="display: none;" />
                </div>
                
                <!-- Analytics Tab -->
                <div class="admin-tab-content" id="analyticsTab">
                    <div class="analytics-dashboard">
                        <div class="analytics-header">
                            <h3><i class="fas fa-chart-line"></i> ุฅุญุตุงุฆูุงุช ุงูุฒูุงุฑ</h3>
                            <div class="analytics-controls">
                                <button class="refresh-analytics-btn" onclick="app.refreshAnalytics()">
                                    <i class="fas fa-sync-alt"></i>
                                    ุชุญุฏูุซ ุงูุจูุงูุงุช
                                </button>
                                <button class="export-analytics-btn" onclick="app.exportAnalytics()">
                                    <i class="fas fa-download"></i>
                                    ุชุตุฏูุฑ ุงูุจูุงูุงุช
                                </button>
                            </div>
                        </div>
                        
                        <!-- Summary Cards -->
                        <div class="analytics-summary">
                            <div class="summary-card">
                                <div class="summary-icon">
                                    <i class="fas fa-users"></i>
                                </div>
                                <div class="summary-content">
                                    <h4>ุฅุฌูุงูู ุงูุฒูุงุฑ</h4>
                                    <span class="summary-number" id="totalVisitors">0</span>
                                    <small class="summary-change" id="visitorsChange">+0% ูู ุงูุฃูุณ</small>
                                </div>
                            </div>
                            
                            <div class="summary-card">
                                <div class="summary-icon">
                                    <i class="fas fa-eye"></i>
                                </div>
                                <div class="summary-content">
                                    <h4>ูุดุงูุฏุงุช ุงูุตูุญุฉ</h4>
                                    <span class="summary-number" id="totalPageViews">0</span>
                                    <small class="summary-change" id="pageViewsChange">+0% ูู ุงูุฃูุณ</small>
                                </div>
                            </div>
                            
                            <div class="summary-card">
                                <div class="summary-icon">
                                    <i class="fas fa-clock"></i>
                                </div>
                                <div class="summary-content">
                                    <h4>ูุชูุณุท ูุฏุฉ ุงูุฌูุณุฉ</h4>
                                    <span class="summary-number" id="avgSessionDuration">0 ุฏูููุฉ</span>
                                    <small class="summary-change" id="sessionDurationChange">+0% ูู ุงูุฃูุณ</small>
                                </div>
                            </div>
                            
                            <div class="summary-card">
                                <div class="summary-icon">
                                    <i class="fas fa-globe"></i>
                                </div>
                                <div class="summary-content">
                                    <h4>ุงูุฒูุงุฑ ุงูุฌุฏุฏ</h4>
                                    <span class="summary-number" id="newVisitors">0</span>
                                    <small class="summary-change" id="newVisitorsChange">+0% ูู ุงูุฃูุณ</small>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Charts Section -->
                        <div class="analytics-charts">
                            <div class="chart-container">
                                <div class="chart-header">
                                    <h4><i class="fas fa-chart-area"></i> ุงูุฒูุงุฑ ุญุณุจ ุงูููุช</h4>
                                    <div class="chart-controls">
                                        <select id="timeRange" onchange="app.updateTimeRange()">
                                            <option value="24h">ุขุฎุฑ 24 ุณุงุนุฉ</option>
                                            <option value="7d" selected>ุขุฎุฑ 7 ุฃูุงู</option>
                                            <option value="30d">ุขุฎุฑ 30 ููู</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="chart-content">
                                    <canvas id="visitorsChart" width="400" height="200"></canvas>
                                </div>
                            </div>
                            
                            <div class="chart-container">
                                <div class="chart-header">
                                    <h4><i class="fas fa-map-marker-alt"></i> ุงูุฒูุงุฑ ุญุณุจ ุงูุจูุฏ</h4>
                                </div>
                                <div class="chart-content">
                                    <div class="countries-list" id="countriesList">
                                        <!-- Countries will be populated here -->
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Detailed Analytics -->
                        <div class="analytics-details">
                            <div class="details-section">
                                <h4><i class="fas fa-desktop"></i> ูุตุงุฏุฑ ุงูุฒูุงุฑ</h4>
                                <div class="sources-list" id="sourcesList">
                                    <!-- Sources will be populated here -->
                                </div>
                            </div>
                            
                            <div class="details-section">
                                <h4><i class="fas fa-clock"></i> ุฃููุงุช ุงูุฐุฑูุฉ</h4>
                                <div class="peak-hours" id="peakHours">
                                    <!-- Peak hours will be populated here -->
                                </div>
                            </div>
                            
                            <div class="details-section">
                                <h4><i class="fas fa-mobile-alt"></i> ุฃููุงุน ุงูุฃุฌูุฒุฉ</h4>
                                <div class="device-stats" id="deviceStats">
                                    <!-- Device stats will be populated here -->
                                </div>
                            </div>
                        </div>
                        
                        <!-- Real-time Visitors -->
                        <div class="realtime-section">
                            <h4><i class="fas fa-circle" style="color: #4CAF50;"></i> ุงูุฒูุงุฑ ุงููุจุงุดุฑูู</h4>
                            <div class="realtime-visitors" id="realtimeVisitors">
                                <div class="realtime-item">
                                    <div class="visitor-info">
                                        <span class="visitor-location">ุฌุงุฑู ุงูุชุญููู...</span>
                                        <span class="visitor-time">-</span>
                                    </div>
                                    <div class="visitor-status">
                                        <span class="status-dot"></span>
                                        <span class="status-text">ูุดุท</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Security Tab -->
                <div class="admin-tab-content" id="securityTab">
                    <div class="security-settings">
                        <div class="security-section">
                            <div class="security-header">
                                <div class="security-icon-wrapper">
                                    <i class="fas fa-shield-alt"></i>
                                </div>
                                <div class="security-title-group">
                                    <h3>ุชุบููุฑ ูููุฉ ุงููุฑูุฑ</h3>
                                    <p>ูู ุจุชุบููุฑ ูููุฉ ูุฑูุฑ ุงูุฅุฏุงุฑุฉ ูุถูุงู ุฃูุงู ุฃูุถู</p>
                                </div>
                            </div>
                            
                            <form class="change-password-form" id="changePasswordForm">
                                <div class="form-group">
                                    <label for="currentPassword">
                                        <i class="fas fa-lock"></i>
                                        ูููุฉ ุงููุฑูุฑ ุงูุญุงููุฉ
                                        <i class="fas fa-eye toggle-current-password" onclick="app.toggleCurrentPasswordVisibility()"></i>
                                    </label>
                                    <div class="password-input-wrapper">
                                        <input type="password" id="currentPassword" required placeholder="ุฃุฏุฎู ูููุฉ ุงููุฑูุฑ ุงูุญุงููุฉ">
                                    </div>
                                </div>
                                
                                <div class="form-group">
                                    <label for="newPassword">
                                        <i class="fas fa-key"></i>
                                        ูููุฉ ุงููุฑูุฑ ุงูุฌุฏูุฏุฉ
                                        <i class="fas fa-eye toggle-new-password" onclick="app.toggleNewPasswordVisibility()"></i>
                                    </label>
                                    <div class="password-input-wrapper">
                                        <input type="password" id="newPassword" required placeholder="ุฃุฏุฎู ูููุฉ ุงููุฑูุฑ ุงูุฌุฏูุฏุฉ">
                                    </div>
                                    <div class="password-strength" id="passwordStrength">
                                        <div class="strength-indicator">
                                            <div class="strength-bar">
                                                <div class="strength-fill" id="strengthFill"></div>
                                            </div>
                                            <span class="strength-text" id="strengthText">ุฃุฏุฎู ูููุฉ ูุฑูุฑ</span>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="form-group">
                                    <label for="confirmPassword">
                                        <i class="fas fa-check-double"></i>
                                        ุชุฃููุฏ ูููุฉ ุงููุฑูุฑ
                                        <i class="fas fa-eye toggle-confirm-password" onclick="app.toggleConfirmPasswordVisibility()"></i>
                                    </label>
                                    <div class="password-input-wrapper">
                                        <input type="password" id="confirmPassword" required placeholder="ุฃุนุฏ ุฅุฏุฎุงู ูููุฉ ุงููุฑูุฑ ุงูุฌุฏูุฏุฉ">
                                    </div>
                                    <div class="password-match" id="passwordMatch">
                                        <i class="fas fa-check-circle match-icon" id="matchIcon"></i>
                                        <span class="match-text" id="matchText">ุชุทุงุจู ูููุฉ ุงููุฑูุฑ</span>
                                    </div>
                                </div>
                                
                                <div class="password-requirements">
                                    <div class="requirements-header">
                                        <i class="fas fa-info-circle"></i>
                                        <h4>ูุชุทูุจุงุช ูููุฉ ุงููุฑูุฑ</h4>
                                    </div>
                                    <ul class="requirements-list">
                                        <li class="requirement-item" id="req-length">
                                            <i class="fas fa-circle requirement-icon"></i>
                                            <span>8 ุฃุญุฑู ุนูู ุงูุฃูู</span>
                                        </li>
                                        <li class="requirement-item" id="req-uppercase">
                                            <i class="fas fa-circle requirement-icon"></i>
                                            <span>ุญุฑู ูุจูุฑ ูุงุญุฏ ุนูู ุงูุฃูู</span>
                                        </li>
                                        <li class="requirement-item" id="req-lowercase">
                                            <i class="fas fa-circle requirement-icon"></i>
                                            <span>ุญุฑู ุตุบูุฑ ูุงุญุฏ ุนูู ุงูุฃูู</span>
                                        </li>
                                        <li class="requirement-item" id="req-number">
                                            <i class="fas fa-circle requirement-icon"></i>
                                            <span>ุฑูู ูุงุญุฏ ุนูู ุงูุฃูู</span>
                                        </li>
                                        <li class="requirement-item" id="req-special">
                                            <i class="fas fa-circle requirement-icon"></i>
                                            <span>ุฑูุฒ ุฎุงุต ูุงุญุฏ ุนูู ุงูุฃูู</span>
                                        </li>
                                    </ul>
                                </div>
                                
                                <div class="form-actions">
                                    <button type="submit" class="change-password-btn" id="changePasswordBtn">
                                        <i class="fas fa-shield-alt"></i>
                                        <span>ุชุบููุฑ ูููุฉ ุงููุฑูุฑ</span>
                                    </button>
                                </div>
                            </form>
                        </div>
                        
                        <div class="security-section">
                            <div class="security-header">
                                <i class="fas fa-info-circle"></i>
                                <h3>ูุนูููุงุช ุงูุฃูุงู</h3>
                            </div>
                            
                            <div class="security-info">
                                <div class="info-item">
                                    <i class="fas fa-shield-alt"></i>
                                    <div class="info-content">
                                        <h4>ุชุดููุฑ ุขูู</h4>
                                        <p>ูููุงุช ุงููุฑูุฑ ูุดูุฑุฉ ุจุงุณุชุฎุฏุงู SHA-256 Hash</p>
                                    </div>
                                </div>
                                
                                <div class="info-item">
                                    <i class="fas fa-clock"></i>
                                    <div class="info-content">
                                        <h4>ุขุฎุฑ ุชุบููุฑ</h4>
                                        <p id="lastPasswordChange">ูู ูุชู ุชุบููุฑูุง ูู ูุจู</p>
                                    </div>
                                </div>
                                
                                <div class="info-item">
                                    <i class="fas fa-user-shield"></i>
                                    <div class="info-content">
                                        <h4>ุญุงูุฉ ุงูุฌูุณุฉ</h4>
                                        <p id="sessionStatus">ูุดุทุฉ</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                </div>
            </div>
        </div>
        <div class="modal-overlay"></div>
    </div>

    <!-- Storage Diagnostic Modal -->
    <div class="modal" id="diagnosticModal">
        <div class="modal-content diagnostic-content">
            <div class="modal-header">
                <h3>๐ ุชุดุฎูุต ุงูุชุฎุฒูู</h3>
                <button class="close-btn" onclick="closeDiagnosticModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="diagnostic-body">
                <div class="diagnostic-section">
                    <h4><i class="fas fa-memory"></i> ุงูุฐุงูุฑุฉ ูุงูููุงุชุฑ</h4>
                    <div class="diagnostic-item">
                        <span class="diagnostic-label">ูุญููุฉ/ูููุชุฑุฉ:</span>
                        <span class="diagnostic-value" id="memoryChannelsCount">-</span> / <span class="diagnostic-value" id="filteredChannelsCount">-</span>
                    </div>
                    <div class="diagnostic-item">
                        <span class="diagnostic-label">ุงููุฆุฉ ุงููุดุทุฉ:</span>
                        <span class="diagnostic-value" id="activeCategory">-</span>
                    </div>
                </div>

                <div class="diagnostic-section">
                    <h4><i class="fas fa-database"></i> ุงูุชุฎุฒูู ูุงูุญูุธ</h4>
                    <div class="diagnostic-item">
                        <span class="diagnostic-label">ูุญููุธุฉ/ุญุฌู:</span>
                        <span class="diagnostic-value" id="savedChannelsCount">-</span> (<span class="diagnostic-value" id="dataSize">-</span>)
                    </div>
                    <div class="diagnostic-item">
                        <span class="diagnostic-label">ุงูุชุฒุงูู:</span>
                        <span class="diagnostic-value" id="syncStatus">-</span>
                    </div>
                    <div class="diagnostic-item">
                        <span class="diagnostic-label">ุขุฎุฑ ุญูุธ:</span>
                        <span class="diagnostic-value" id="lastSaved">-</span>
                    </div>
                </div>

                <div class="diagnostic-actions">
                    <button class="diagnostic-btn export-btn" onclick="app.exportChannels()">
                        <i class="fas fa-download"></i> ุชุตุฏูุฑ
                    </button>
                    <button class="diagnostic-btn refresh-btn" onclick="refreshDiagnostic()">
                        <i class="fas fa-sync-alt"></i> ุชุญุฏูุซ
                    </button>
                    <button class="diagnostic-btn console-btn" onclick="openConsoleInfo()">
                        <i class="fas fa-terminal"></i> Console
                    </button>
                </div>
            </div>
        </div>
        <div class="modal-overlay"></div>
    </div>

    <!-- Welcome Modal -->
    <div class="modal" id="welcomeModal">
        <div class="modal-content welcome-content">
            <div class="welcome-header">
                <div class="welcome-icon">
                    <i class="fas fa-satellite-dish"></i>
                </div>
                <h2>ูุฑุญุจุงู ุจู ูู ANON TV!</h2>
                <p>ููุตุฉ ุดุงููุฉ ููุดุงูุฏุฉ ุงููููุงุช ุงููุถุงุฆูุฉ ุงูุนุฑุจูุฉ ุงููุจุงุดุฑุฉ ุจุฃูุถู ุฌูุฏุฉ ูุฃุญุฏุซ ุงูุชูููุงุช ูุน ูุฒุงููุฉ ุณุญุงุจูุฉ ูุชุทูุฑุฉ</p>
            </div>
            
            <div class="welcome-body">
                <div class="welcome-step">
                    <div class="step-icon">
                        <i class="fas fa-sync-alt"></i>
                    </div>
                    <div class="step-content">
                        <h4>ุชุญุฏูุซ ุงููููุงุช ุงูุชููุงุฆู</h4>
                        <p>ูุชู ูุญุต ุงูุชุญุฏูุซุงุช ุชููุงุฆูุงู ุนูุฏ ุชุญููู ุงูุชุทุจูู. ููููู ุชุญุฏูุซ ุงููููุงุช ูุฏููุงู ูู ุฎูุงู ุฒุฑ "ุชุญุฏูุซ ุงููููุงุช" ูู ุงููุงุฆูุฉ ุงูุฌุงูุจูุฉ ุฃู ูู ูุงุฆูุฉ "ุงููุฒูุฏ" ูู ุงููุงุชู</p>
                    </div>
                </div>
                
                <div class="welcome-step">
                    <div class="step-icon">
                        <i class="fas fa-cloud"></i>
                    </div>
                    <div class="step-content">
                        <h4>ุงููุฒุงููุฉ ุงูุณุญุงุจูุฉ ุงููุชุทูุฑุฉ</h4>
                        <p>ุงุญูุธ ูููุงุชู ูุฅุนุฏุงุฏุงุชู ูู ุงูุณุญุงุจุฉ ูุน ุฏุนู GitHub/GitLab. ุชุชู ุงููุฒุงููุฉ ุชููุงุฆูุงู ุนูุฏ ุฅุถุงูุฉ ุฃู ุชุนุฏูู ุงููููุงุชุ ูููููู ุงููุตูู ูุจูุงูุงุชู ูู ุฃู ุฌูุงุฒ</p>
                    </div>
                </div>
                
                <div class="welcome-step">
                    <div class="step-icon">
                        <i class="fas fa-search"></i>
                    </div>
                    <div class="step-content">
                        <h4>ุงูุจุญุซ ุงูุณุฑูุน</h4>
                        <p>ุงุณุชุฎุฏู ุดุฑูุท ุงูุจุญุซ ูู ุงูุฃุนูู ููุนุซูุฑ ุนูู ุงููููุงุช ุจุณุฑุนุฉุ ุฃู ุงุณุชุฎุฏู ูุงุฆูุฉ ุงููุฆุงุช ูุชุตูุญ ุงููููุงุช ุญุณุจ ุงูููุน (ุฃุฎุจุงุฑุ ุฑูุงุถุฉุ ูููุนุฉุ ุฅูุฎ)</p>
                    </div>
                </div>
                
                <div class="welcome-step">
                    <div class="step-icon">
                        <i class="fas fa-cog"></i>
                    </div>
                    <div class="step-content">
                        <h4>ุชุฎุตูุต ุงูุชุฌุฑุจุฉ</h4>
                        <p>ุงุถุจุท ุฌูุฏุฉ ุงูุจุซุ ุญุฌู ุงููุตุ ูุธุงู ุงูุฃููุงูุ ูุงููุถุน ุงููููู ูู ุฎูุงู ุงูุฅุนุฏุงุฏุงุช. ููููู ุฃูุถุงู ุชุฎุตูุต ุชุฑุชูุจ ุงููููุงุช ุญุณุจ ุฑุบุจุชู</p>
                    </div>
                </div>
                
                <div class="welcome-step">
                    <div class="step-icon">
                        <i class="fas fa-heart"></i>
                    </div>
                    <div class="step-content">
                        <h4>ุงูููุถูุฉ ูุงูุฅุฏุงุฑุฉ</h4>
                        <p>ุงุญูุธ ุงููููุงุช ุงูููุถูุฉ ูููุตูู ุงูุณุฑูุนุ ุฃู ุฃุถู ูููุงุช ุฌุฏูุฏุฉ ูู ููุญุฉ ุงูุชุญูู. ููููู ุฃูุถุงู ุชุตุฏูุฑ ูุงุณุชูุฑุงุฏ ููุงุฆู ุงููููุงุช ูุน ูุฒุงููุฉ ุชููุงุฆูุฉ ููุชุบููุฑุงุช</p>
                    </div>
                </div>
                
                <div class="welcome-step">
                    <div class="step-icon">
                        <i class="fas fa-mobile-alt"></i>
                    </div>
                    <div class="step-content">
                        <h4>ูุชูุงูู ูุน ุฌููุน ุงูุฃุฌูุฒุฉ</h4>
                        <p>ูุนูู ุงูุชุทุจูู ุจุณูุงุณุฉ ุนูู ุงูููุงุชู ูุงูุฃุฌูุฒุฉ ุงูููุญูุฉ ูุฃุฌูุฒุฉ ุงูููุจููุชุฑ. ููููู ุฃูุถุงู ุงุณุชุฎุฏุงู ูุถุน ุงูุดุงุดุฉ ุงููููุตูุฉ (Picture-in-Picture)</p>
                    </div>
                </div>
            </div>
            
            <div class="welcome-footer">
                <button class="welcome-btn secondary" onclick="app.closeWelcomeModal()">
                    <i class="fas fa-times"></i>
                    ุฅุบูุงู
                </button>
            </div>
        </div>
        <div class="modal-overlay"></div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <div class="footer-logo">
                        <i class="fas fa-satellite-dish"></i>
                        <h3>ANON TV</h3>
                    </div>
                    <p class="footer-description">
                        ููุตุฉ ุดุงููุฉ ููุดุงูุฏุฉ ุงููููุงุช ุงููุถุงุฆูุฉ ุงูุนุฑุจูุฉ ุงููุจุงุดุฑุฉ ุจุฃูุถู ุฌูุฏุฉ ูุฃุญุฏุซ ุงูุชูููุงุช
                    </p>
                    <div class="footer-social">
                        <a href="#" class="social-link" title="GitHub">
                            <i class="fab fa-github"></i>
                        </a>
                        <a href="#" class="social-link" title="Twitter">
                            <i class="fab fa-twitter"></i>
                        </a>
                        <a href="#" class="social-link" title="Telegram">
                            <i class="fab fa-telegram"></i>
                        </a>
                        <a href="#" class="social-link" title="Discord">
                            <i class="fab fa-discord"></i>
                        </a>
                    </div>
                </div>
                
            </div>
            
            <div class="footer-bottom">
                <div class="footer-copyright">
                    <p>&copy; 2025 ANON TV. ุฌููุน ุงูุญููู ูุญููุธุฉ.</p>
                    <p class="footer-version">ุงูุฅุตุฏุงุฑ  : 2.0.1<span id="appVersion"></span></p>
                </div>
                <div class="footer-legal">
                    <a href="#" class="legal-link">ุณูุงุณุฉ ุงูุฎุตูุตูุฉ</a>
                    <span class="separator">|</span>
                    <a href="#" class="legal-link" onclick="openIPTVChecker()">ูุญุต ุงูุฑูุงุจุท</a>
                    <span class="separator">|</span>
                    <a href="#" class="legal-link">ุงุชุตู ุจูุง</a>
                </div>
            </div>
        </div>
    </footer>

    <!-- Notifications Container -->
    <div class="notifications-container" id="notificationsContainer"></div>

    <!-- Scroll to Top Button -->
    <button class="scroll-to-top-btn" id="scrollToTopBtn" onclick="scrollToTop()" title="ุงูุตุนูุฏ ุฅูู ุงูุฃุนูู">
        <i class="fas fa-chevron-up"></i>
    </button>

    <!-- PWA Install Button -->
    <button class="pwa-install-btn" id="pwaInstallBtn" onclick="installPWA()" title="ุชุซุจูุช ุงูุชุทุจูู" style="display: none;">
        <i class="fas fa-download"></i>
        <span>ุชุซุจูุช ุงูุชุทุจูู</span>
    </button>

    <!-- PWA Conflict Resolution Button -->
    <button class="pwa-conflict-btn" id="pwaConflictBtn" onclick="resolvePWAConflict()" title="ุฅุฒุงูุฉ ุงูุชุทุจูู ุงููุชุนุงุฑุถ - ุณูุชู ุญุฐู ุงูุชุทุจููุงุช ุงูุฃุฎุฑู ูู ููุณ ุงููููุน" style="display: none;">
        <i class="fas fa-exclamation-triangle"></i>
        <span>ุฅุฒุงูุฉ ุงูุชุทุจูู ุงููุชุนุงุฑุถ</span>
        <small>ุญู ุงููุดููุฉ</small>
    </button>

    <!-- PWA Install Banner -->
    <div class="pwa-install-banner" id="pwaInstallBanner" style="display: none;">
        <div class="banner-content">
            <div class="banner-icon">
                <i class="fas fa-mobile-alt"></i>
            </div>
            <div class="banner-text">
                <h4>ุชุซุจูุช ANON TV</h4>
                <p>ุงุญุตู ุนูู ุชุฌุฑุจุฉ ุฃูุถู ูุน ุชุทุจูู ุงูุชููุฒููู ุงููุซุจุช ุนูู ุฌูุงุฒู</p>
            </div>
            <div class="banner-actions">
                <button class="banner-install-btn" onclick="installPWA()">
                    <i class="fas fa-download"></i>
                    ุชุซุจูุช
                </button>
                <button class="banner-dismiss-btn" onclick="dismissInstallBanner()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
        </div>
    </div>

    <!-- HLS.js Library for video streaming -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <!-- Chart.js Library for analytics charts -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@latest"></script>
    <script>
        // Check if HLS.js loaded successfully
        window.addEventListener('load', function() {
            if (typeof Hls === 'undefined') {
                console.error('โ ูุดู ูู ุชุญููู ููุชุจุฉ HLS.js');
                // Show notification to user
                if (window.app && window.app.notifyError) {
                    window.app.notifyError('ูุดู ูู ุชุญููู ููุชุจุฉ ุชุดุบูู ุงูููุฏูู - ุชุญูู ูู ุงุชุตุงู ุงูุฅูุชุฑูุช');
                }
            } else {
                console.log('โ ุชู ุชุญููู ููุชุจุฉ HLS.js ุจูุฌุงุญ');
            }
        });

        // PWA Installation and Service Worker
        let deferredPrompt;
        let isInstalled = false;

        // Register Service Worker
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', async () => {
                try {
                    const registration = await navigator.serviceWorker.register('./sw.js');
                    console.log('โ Service Worker registered successfully:', registration);
                    
                    // Check for updates
                    registration.addEventListener('updatefound', () => {
                        const newWorker = registration.installing;
                        newWorker.addEventListener('statechange', () => {
                            if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {
                                // New content is available, show update notification
                                showUpdateNotification();
                            }
                        });
                    });
                } catch (error) {
                    console.error('โ Service Worker registration failed:', error);
                }
            });
        }

        // Listen for beforeinstallprompt event
        window.addEventListener('beforeinstallprompt', (e) => {
            console.log('๐ฑ PWA: Install prompt triggered');
            
            // Always prevent default and handle manually for TV app
            e.preventDefault();
            deferredPrompt = e;
            
            // Check for conflicts first
            if ('serviceWorker' in navigator) {
                navigator.serviceWorker.getRegistrations().then(registrations => {
                    let hasConflicts = false;
                    
                    registrations.forEach(registration => {
                        if (registration.scope.includes('anon-site.github.io') && 
                            !registration.scope.includes('TV-AR') &&
                            registration.scope !== window.location.origin + '/TV-AR/') {
                            hasConflicts = true;
                        }
                    });
                    
                    // Show install button/banner only for TV app and if no conflicts
                    if (window.location.pathname.includes('/TV-AR/') && !hasConflicts) {
                        console.log('๐ฑ PWA: TV app install prompt captured - no conflicts');
                        showInstallPrompt();
                    } else if (hasConflicts) {
                        console.log('๐ฑ PWA: Conflicts detected, hiding install prompt');
                        hideInstallPrompt();
                    } else {
                        console.log('๐ฑ PWA: Not TV app, hiding install prompt');
                        hideInstallPrompt();
                    }
                });
            } else {
                // Show install button/banner only for TV app
                if (window.location.pathname.includes('/TV-AR/')) {
                    console.log('๐ฑ PWA: TV app install prompt captured');
                    showInstallPrompt();
                } else {
                    console.log('๐ฑ PWA: Not TV app, hiding install prompt');
                    hideInstallPrompt();
                }
            }
        });

        // Listen for appinstalled event
        window.addEventListener('appinstalled', (e) => {
            console.log('๐ PWA: App installed successfully');
            isInstalled = true;
            hideInstallPrompt();
            
            // Show success notification
            if (window.app && window.app.notifySuccess) {
                window.app.notifySuccess('ุชู ุชุซุจูุช ุงูุชุทุจูู ุจูุฌุงุญ! ููููู ุงูุขู ุงููุตูู ุฅููู ูู ุงูุดุงุดุฉ ุงูุฑุฆูุณูุฉ');
            }
        });

        // Check if app is already installed
        window.addEventListener('load', () => {
            if (window.matchMedia('(display-mode: standalone)').matches || 
                window.navigator.standalone === true) {
                console.log('๐ฑ PWA: App is running in standalone mode');
                
                // Check if this is the TV app specifically
                if (window.location.pathname.includes('/TV-AR/') || 
                    window.location.search.includes('source=pwa')) {
                    console.log('๐ฑ PWA: TV app is running in standalone mode');
                    isInstalled = true;
                    hideInstallPrompt();
                } else {
                    console.log('๐ฑ PWA: Different app is running in standalone mode');
                }
            }
        });

        // Install PWA function
        async function installPWA() {
            if (!deferredPrompt) {
                // Fallback for browsers that don't support beforeinstallprompt
                showInstallInstructions();
                return;
            }

            try {
                // Show the install prompt
                deferredPrompt.prompt();
                
                // Wait for the user to respond to the prompt
                const { outcome } = await deferredPrompt.userChoice;
                
                console.log(`๐ฑ PWA: User choice: ${outcome}`);
                
                if (outcome === 'accepted') {
                    console.log('โ PWA: User accepted the install prompt');
                } else {
                    console.log('โ PWA: User dismissed the install prompt');
                }
                
                // Clear the deferredPrompt
                deferredPrompt = null;
                hideInstallPrompt();
                
            } catch (error) {
                console.error('โ PWA: Install failed:', error);
                showInstallInstructions();
            }
        }

        // Show install prompt
        function showInstallPrompt() {
            if (isInstalled) return;
            
            // Double check we're on the TV app
            if (!window.location.pathname.includes('/TV-AR/')) {
                console.log('๐ฑ PWA: Not on TV app, hiding install prompt');
                return;
            }
            
            const installBtn = document.getElementById('pwaInstallBtn');
            const installBanner = document.getElementById('pwaInstallBanner');
            
            // Show install button in header
            if (installBtn) {
                installBtn.style.display = 'flex';
            }
            
            // Show install banner after a delay
            setTimeout(() => {
                if (installBanner && !localStorage.getItem('pwa-banner-dismissed')) {
                    installBanner.style.display = 'block';
                }
            }, 5000); // Show after 5 seconds
        }

        // Hide install prompt
        function hideInstallPrompt() {
            const installBtn = document.getElementById('pwaInstallBtn');
            const installBanner = document.getElementById('pwaInstallBanner');
            
            if (installBtn) {
                installBtn.style.display = 'none';
            }
            
            if (installBanner) {
                installBanner.style.display = 'none';
            }
        }

        // Dismiss install banner
        function dismissInstallBanner() {
            const installBanner = document.getElementById('pwaInstallBanner');
            if (installBanner) {
                installBanner.style.display = 'none';
                localStorage.setItem('pwa-banner-dismissed', 'true');
            }
        }

        // Show install instructions for unsupported browsers
        function showInstallInstructions() {
            const isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent);
            const isAndroid = /Android/.test(navigator.userAgent);
            
            let instructions = '';
            
            if (isIOS) {
                instructions = `
                    <div class="install-instructions">
                        <h4>๐ฑ ุชุซุจูุช ุนูู iOS:</h4>
                        <ol>
                            <li>ุงุถุบุท ุนูู ุฒุฑ ุงููุดุงุฑูุฉ ูู Safari</li>
                            <li>ุงุฎุชุฑ "ุฅุถุงูุฉ ุฅูู ุงูุดุงุดุฉ ุงูุฑุฆูุณูุฉ"</li>
                            <li>ุงุถุบุท "ุฅุถุงูุฉ"</li>
                        </ol>
                    </div>
                `;
            } else if (isAndroid) {
                instructions = `
                    <div class="install-instructions">
                        <h4>๐ค ุชุซุจูุช ุนูู Android:</h4>
                        <ol>
                            <li>ุงุถุบุท ุนูู ุงููุงุฆูุฉ ูู Chrome</li>
                            <li>ุงุฎุชุฑ "ุฅุถุงูุฉ ุฅูู ุงูุดุงุดุฉ ุงูุฑุฆูุณูุฉ"</li>
                            <li>ุงุถุบุท "ุฅุถุงูุฉ"</li>
                        </ol>
                    </div>
                `;
            } else {
                instructions = `
                    <div class="install-instructions">
                        <h4>๐ป ุชุซุจูุช ุนูู ุงูููุจููุชุฑ:</h4>
                        <ol>
                            <li>ุงุถุบุท ุนูู ุฃููููุฉ ุงูุชุซุจูุช ูู ุดุฑูุท ุงูุนููุงู</li>
                            <li>ุฃู ุงุณุชุฎุฏู ูุงุฆูุฉ ุงููุชุตูุญ: "ุชุซุจูุช ุงูุชุทุจูู"</li>
                        </ol>
                    </div>
                `;
            }
            
            if (window.app && window.app.showModal) {
                window.app.showModal('ุชุนูููุงุช ุงูุชุซุจูุช', instructions);
            }
        }

        // Show update notification
        function showUpdateNotification() {
            if (window.app && window.app.notifyInfo) {
                window.app.notifyInfo('ุชุญุฏูุซ ุฌุฏูุฏ ูุชุงุญ! ุงุถุบุท ููุง ูุชุญุฏูุซ ุงูุชุทุจูู', () => {
                    window.location.reload();
                });
            }
        }

        // Handle offline/online status
        window.addEventListener('online', () => {
            console.log('๐ Connection restored');
            if (window.app && window.app.notifySuccess) {
                window.app.notifySuccess('ุชู ุงุณุชุนุงุฏุฉ ุงูุงุชุตุงู ุจุงูุฅูุชุฑูุช');
            }
        });

        window.addEventListener('offline', () => {
            console.log('๐ด Connection lost');
            if (window.app && window.app.notifyWarning) {
                window.app.notifyWarning('ููุฏุงู ุงูุงุชุตุงู ุจุงูุฅูุชุฑูุช - ููููู ุงูุงุณุชูุฑุงุฑ ูู ุงุณุชุฎุฏุงู ุงูุชุทุจูู');
            }
        });

        // Request notification permission (disabled - only request when needed)
        function requestNotificationPermission() {
            if ('Notification' in window && Notification.permission === 'default') {
                Notification.requestPermission().then(permission => {
                    if (permission === 'granted') {
                        console.log('โ Notification permission granted');
                    }
                });
            }
        }

        // Note: Notification permission is now only requested when explicitly needed
        // No automatic permission request on page load or click

        // Function to resolve PWA conflicts
        async function resolvePWAConflict() {
            if ('serviceWorker' in navigator) {
                try {
                    // Show loading message
                    if (window.app && window.app.notifyInfo) {
                        window.app.notifyInfo('ุฌุงุฑู ุฅุฒุงูุฉ ุงูุชุทุจููุงุช ุงููุชุนุงุฑุถุฉ...', 3000);
                    }
                    
                    const registrations = await navigator.serviceWorker.getRegistrations();
                    let conflictsFound = false;
                    let removedCount = 0;
                    
                    for (const registration of registrations) {
                        // More specific check for conflicts
                        if (registration.scope.includes('anon-site.github.io') && 
                            !registration.scope.includes('TV-AR') &&
                            registration.scope !== window.location.origin + '/TV-AR/') {
                            console.log('๐ง PWA: Unregistering conflicting service worker:', registration.scope);
                            await registration.unregister();
                            conflictsFound = true;
                            removedCount++;
                        }
                    }
                    
                    if (conflictsFound) {
                        // Clear all conflicting caches
                        const cacheNames = await caches.keys();
                        let deletedCaches = 0;
                        
                        for (const cacheName of cacheNames) {
                            // Delete caches that are not for the current TV app
                            if ((cacheName.includes('anon-tv') && !cacheName.includes('anon-tv-app')) ||
                                (cacheName.includes('anon-site') && !cacheName.includes('TV-AR'))) {
                                await caches.delete(cacheName);
                                console.log('๐๏ธ PWA: Deleted conflicting cache:', cacheName);
                                deletedCaches++;
                            }
                        }
                        
                        // Show detailed success message
                        if (window.app && window.app.notifySuccess) {
                            window.app.notifySuccess(
                                `ุชู ุฅุฒุงูุฉ ${removedCount} ุชุทุจูู ูุชุนุงุฑุถ ู ${deletedCaches} ุฐุงูุฑุฉ ุชุฎุฒูู ูุคูุช. ููููู ุงูุขู ุชุซุจูุช ุชุทุจูู ANON TV.`,
                                6000
                            );
                        }
                        
                        // Hide conflict button and show install button
                        const conflictBtn = document.getElementById('pwaConflictBtn');
                        const installBtn = document.getElementById('pwaInstallBtn');
                        
                        if (conflictBtn) conflictBtn.style.display = 'none';
                        if (installBtn && deferredPrompt) installBtn.style.display = 'flex';
                        
                        // Clear any stored conflict flags
                        localStorage.removeItem('pwa-conflict-detected');
                        
                        // Reload page to ensure clean state
                        setTimeout(() => {
                            window.location.reload();
                        }, 3000);
                        
                    } else {
                        if (window.app && window.app.notifyInfo) {
                            window.app.notifyInfo('ูุง ุชูุฌุฏ ุชุทุจููุงุช ูุชุนุงุฑุถุฉ.');
                        }
                        
                        // Hide conflict button anyway
                        const conflictBtn = document.getElementById('pwaConflictBtn');
                        if (conflictBtn) conflictBtn.style.display = 'none';
                    }
                    
                } catch (error) {
                    console.error('โ PWA: Failed to resolve conflicts:', error);
                    if (window.app && window.app.notifyError) {
                        window.app.notifyError('ูุดู ูู ุฅุฒุงูุฉ ุงูุชุทุจูู ุงููุชุนุงุฑุถ. ุญุงูู ูุฑุฉ ุฃุฎุฑู ุฃู ุฃุนุฏ ุชุญููู ุงูุตูุญุฉ.');
                    }
                }
            } else {
                if (window.app && window.app.notifyError) {
                    window.app.notifyError('ุงููุชุตูุญ ูุง ูุฏุนู Service Workers.');
                }
            }
        }

        // Check for conflicting PWA installations and show conflict resolution button
        window.addEventListener('load', () => {
            if ('serviceWorker' in navigator) {
                navigator.serviceWorker.getRegistrations().then(registrations => {
                    let hasConflicts = false;
                    let conflictDetails = [];
                    
                    registrations.forEach(registration => {
                        // Check for conflicting registrations - more specific check
                        if (registration.scope.includes('anon-site.github.io') && 
                            !registration.scope.includes('TV-AR') &&
                            registration.scope !== window.location.origin + '/TV-AR/') {
                            console.log('โ๏ธ PWA: Found conflicting PWA installation:', registration.scope);
                            hasConflicts = true;
                            conflictDetails.push(registration.scope);
                        }
                    });
                    
                    if (hasConflicts) {
                        // Show conflict resolution button
                        const conflictBtn = document.getElementById('pwaConflictBtn');
                        if (conflictBtn) {
                            conflictBtn.style.display = 'flex';
                        }
                        
                        // Show more informative warning message
                        if (window.app && window.app.notifyWarning) {
                            window.app.notifyWarning(
                                `โ๏ธ ุชู ุงูุชุดุงู ุชุทุจูู ูุชุนุงุฑุถ ูุซุจุช ูู ููุณ ุงููููุน (${conflictDetails.length} ุชุทุจูู). ูุฐุง ูููุน ุชุซุจูุช ุชุทุจูู ANON TV. ุงุถุบุท ุนูู ุฒุฑ "ุฅุฒุงูุฉ ุงูุชุทุจูู ุงููุชุนุงุฑุถ" ูุญู ุงููุดููุฉ.`,
                                12000
                            );
                        }
                        
                        // Store conflict flag for later reference
                        localStorage.setItem('pwa-conflict-detected', 'true');
                    } else {
                        // No conflicts found, hide conflict button
                        const conflictBtn = document.getElementById('pwaConflictBtn');
                        if (conflictBtn) {
                            conflictBtn.style.display = 'none';
                        }
                    }
                }).catch(error => {
                    console.error('โ PWA: Error checking for conflicts:', error);
                });
            }
            
            // Check if we're in standalone mode but not the TV app
            if (window.matchMedia('(display-mode: standalone)').matches || 
                window.navigator.standalone === true) {
                if (!window.location.pathname.includes('/TV-AR/')) {
                    console.log('โ๏ธ PWA: Running in standalone mode but not TV app');
                    
                    // Redirect to TV app
                    if (window.app && window.app.notifyInfo) {
                        window.app.notifyInfo(
                            'ูุจุฏู ุฃูู ุชุณุชุฎุฏู ุชุทุจูู ุขุฎุฑ. ุงุถุบุท ููุง ููุงูุชูุงู ุฅูู ุชุทุจูู ANON TV.',
                            () => {
                                window.location.href = '/TV-AR/';
                            }
                        );
                    }
                }
            }
        });
    </script>
    <script src="script.js"></script>
</body>
</html>


